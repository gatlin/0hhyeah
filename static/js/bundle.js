!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r,i;r=[n,e,n(1),n(4)],i=function(t,e,n,r){"use strict";new n.App({state:new r.Grid(8).initialize(),update:function(t,e){if("click"===t.type){var n=t.data;console.log("touched grid cell x = "+n[0]+", y = "+n[1]),e=e.toggle(n[0],n[1])}if("solve"===t.type&&e.solve(),"generate"===t.type){var i=e.size;e=new r.Grid(i).initialize().generate()}return e},main:function(t){t.events.click.filter(function(t){return t.hasClass("grid-cell")}).recv(function(e){var n=e.getId().split("-")[2],r=n.split(":").map(function(t){return parseInt(t)});t.actions.send({type:"click",data:r})}),t.events.click.filter(function(t){return"solve-btn"===t.getId()}).recv(function(e){t.actions.send({type:"solve"})}),t.events.click.filter(function(t){return"generate-btn"===t.getId()}).recv(function(e){t.actions.send({type:"generate"})})},render:function(t){return t.render()},eventRoot:"app",domRoot:"app"}).start()}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n,e,n(2),n(3),n(2),n(3)],i=function(t,e,n,r,i,o){"use strict";function s(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function a(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r]=new i.Signal(function(t){return new c(t)})}return e}function u(t){if(Array.isArray(t)){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r]=i.Signal.make()}return e}var o="undefined"==typeof t||null===t?{outbound:[],inbound:[]}:t;for(var s in o){for(var a=o[s],u={},n=0;n<a.length;n++){var r=a[n];u[r]=i.Signal.make()}o[s]=u}return o}s(n),e.el=r.el;var c=function(){function t(t){this.raw=t,this.classes=t.target.className.trim().split(/\s+/g)||[],this.id=t.target.id}return t.prototype.hasClass=function(t){return this.classes.indexOf(t)!==-1},t.prototype.getClasses=function(){return this.classes},t.prototype.getId=function(){return this.id},t.prototype.getValue=function(){return this.raw.target.value},t.prototype.getRaw=function(){return this.raw},t}();e.AlmEvent=c;var d=["click","dblclick","keyup","keydown","keypress","blur","focusout","input","change","load"],l=function(){function t(t){this.gui="undefined"==typeof t.gui||t.gui,this.eventRoot="string"==typeof t.eventRoot?document.getElementById(t.eventRoot):"undefined"==typeof t.eventRoot?document:t.eventRoot,this.domRoot="string"==typeof t.domRoot?document.getElementById(t.domRoot):"undefined"==typeof t.domRoot?document.body:t.domRoot;var e=d.concat("undefined"!=typeof t.extraEvents?t.extraEvents:[]);this.events=a(e),this.ports=u(t.ports);var n=new i.Mailbox(null),r=n.reduce(t.state,function(e,n){return null===e?n:t.update(e,n)});this.scope=Object.seal({events:this.events,ports:this.ports,actions:n,state:r}),t.main(this.scope),this.render=this.gui?t.render:null}return t.prototype.registerEvent=function(t,e){var n=function(t){return e.send(t)};this.eventRoot.addEventListener(t,n,!0)},t.prototype.editScope=function(t){return t(this.scope),this},t.prototype.setEventRoot=function(t){return this.eventRoot="string"==typeof t?document.getElementById(t):t,this},t.prototype.setDomRoot=function(t){return this.domRoot="string"==typeof t?document.getElementById(t):t,this},t.prototype.start=function(){for(var t in this.events){var e=this.events[t];e.numListeners()>0&&this.registerEvent(t,e)}if(this.gui){var n=this.scope.state.map(this.render);o.render(n,this.domRoot)}return{ports:this.scope.ports,state:this.scope.state}},t}();e.App=l}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i,o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};r=[n,e],i=function(t,e){"use strict";function n(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(n){t.prototype[n]=e.prototype[n]})})}function r(t){setTimeout(t,0)}e.derive=n;var i=function(){function t(){}return t.pipe=function(t){for(var e=t[0],n=1;n<t.length;n++)e=e.flatMap(t[n]);return e},t.prototype.flatMap=function(t){return this.map(t).flatten()},t.prototype.pipe=function(t){for(var e=this,n=0;n<t.length;n++)e=e.flatMap(t[n]);return e},t}();e.FlatMap=i,e.async=r;var s=function(){function t(t){this.fn=t,this.listeners=[]}return t.prototype.connect=function(t){return this.listeners.push(t),t},t.make=function(){return new t(function(t){return t})},t.prototype.send=function(t){var e=this.fn(t);if("undefined"!=typeof e)for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];r.send(e)}},t.prototype.recv=function(e){this.connect(new t(function(t){return e(t)}))},t.prototype.map=function(e){var n=new t(e);return this.connect(n)},t.prototype.filter=function(e){var n=new t(function(t){if(e(t))return t});return this.connect(n)},t.prototype.reduce=function(e,n){var r=e,i=new t(function(t){return r=n(t,r)});return this.connect(i)},t.prototype.numListeners=function(){return this.listeners.length},t}();e.Signal=s;var a=function(t){function e(e){t.call(this,function(t){return t}),this.send(e)}return o(e,t),e.prototype.send=function(e){var n=this;r(function(){t.prototype.send.call(n,e)})},e.prototype.recv=function(e){t.prototype.recv.call(this,e)},e}(s);e.Mailbox=a}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n,e],i=function(t,e){"use strict";function n(t,e,n){var r="undefined"==typeof n?[]:n.map(function(t,e){return"string"==typeof t?new c(t,[],u.Text):t});return new c({tag:t,attrs:e},r,u.Node)}function r(t){if(null===t)return null;if(t.treeType===u.Text)return document.createTextNode(t.content);var e=document.createElement(t.content.tag);for(var n in t.content.attrs)e.setAttribute(n,t.content.attrs[n]);for(var i=0;i<t.children.length;i++){var o=r(t.children[i]);e.appendChild(o)}return null!==t.mailbox&&t.mailbox.send(e),e}function i(t,e){for(var n=t,i=r(e);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(i)}function o(t,e,n){if(!t.length)return e.map(function(t){return[d.Insert,null,t]});if(!e.length)return t.map(function(t){return[d.Delete,t,null]});for(var r=t.length+1,i=e.length+1,o=new Array(r*i),s=[],a=0;a<r;a++)o[a*i]=a;for(var u=0;u<i;u++)o[u]=u;for(var c=1;c<i;c++)for(var l=1;l<r;l++)n(t[l-1],e[c-1])?o[l*i+c]=o[(l-1)*i+(c-1)]:o[l*i+c]=Math.min(o[(l-1)*i+c],o[l*i+(c-1)])+1;for(var f=r-1,h=i-1;0!==f||0!==h;)n(t[f-1],e[h-1])?(f--,h--,s.unshift([d.Merge,t[f],e[h]])):o[f*i+(h-1)]<=o[(f-1)*i+h]?(h--,s.unshift([d.Insert,null,e[h]])):(f--,s.unshift([d.Delete,t[f],null]));return s}function s(t,e,n,i){if(void 0===i&&(i=0),"undefined"==typeof n||null===n)return void t.removeChild(t.childNodes[i]);if("undefined"==typeof e||null===e)return void t.insertBefore(r(n),t.childNodes[i]);if(n.treeType===u.Node){if(e.treeType===u.Node&&e.content.tag===n.content.tag){var a=t.childNodes[i];for(var c in e.content.attrs)c in n.content.attrs||(a.removeAttribute(c),delete a[c]);for(var c in n.content.attrs){var l=n.content.attrs[c];c in e.content.attrs&&l===e.content.attrs[c]||(a[c]=l,a.setAttribute(c,l))}for(var f=o(e.children,n.children,function(t,e){return"undefined"!=typeof t&&t.eq(e)}),h=0,p=0;p<f.length;p++){var v=f[p];s(t.childNodes[i],v[1],v[2],h),v[0]!==d.Delete&&h++}}}else t.replaceChild(r(n),t.childNodes[i])}function a(t,e){t.reduce(null,function(t,n){return null===n?i(e,t):s(e,n,t),t})}e.el=n;var u;!function(t){t[t.Text=0]="Text",t[t.Node=1]="Node"}(u||(u={}));var c=function(){function t(t,e,n){this.content=t,this.children=e,this.treeType=n,this.mailbox=null,n===u.Node?"key"in this.content.attrs?(this.key=this.content.attrs.key,delete this.content.attrs.key):"id"in this.content.attrs?this.key=this.content.attrs.id:this.key=this.content.tag:this.key="text-node"}return t.prototype.subscribe=function(t){return this.mailbox=t,this},t.prototype.eq=function(t){return!!t&&this.key===t.key},t}();e.VTree=c;var d;!function(t){t[t.Merge=0]="Merge",t[t.Delete=1]="Delete",t[t.Insert=2]="Insert"}(d||(d={})),e.diff_array=o,e.diff_dom=s,e.render=a}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n,e,n(1),n(5)],i=function(t,e,n,r){"use strict";var i=function(){function t(t){this.size=t,this.data=new Array(t*t)}return t.prototype.at=function(t,e){return this.data[e*this.size+t]},t.prototype.set=function(t,e,n){return this.data[e*this.size+t]=n,this},t.prototype.toggle=function(t,e){return this.set(t,e,(this.at(t,e)+1)%3)},t.prototype.initialize=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.set(t,e,2);return this},t.prototype.verify=function(){if(!this.completed())return!1;for(var t=this.size,e={},n={},i=new Array(this.size),o=0;o<this.size;o++)i[o]=new Array(this.size);for(var s=0;s<this.size;s++){for(var a=[],o=0;o<this.size;o++){var u=this.at(o,s);if(2===u)return!1;a.push(u),i[o][s]=u}var c=r.bits2int(a);if(c in e)return!1;if(e[c]=1,r.sum_bits(a)!==t/2)return!1}for(var d=0;d<this.size;d++){var l=i[d],f=r.bits2int(l);if(f in n)return!1;if(n[f]=1,r.sum_bits(l)!==t/2)return!1}return!0},t.prototype.completed=function(){return this.data.reduce(function(t,e){return t&&2!==e},!0)},t.prototype.left_bounded_cell=function(t){return t%this.size===0},t.prototype.right_bounded_cell=function(t){return t%this.size===this.size-1},t.prototype.top_bounded_cell=function(t){return t<this.size},t.prototype.bottom_bounded_cell=function(t){return t>this.size*(this.size-1)},t.prototype.solve_pass=function(){for(var t=this.size,e=this.size,n=2*this.size,i=0;i<t*t;i++)2!==this.data[i]&&(this.right_bounded_cell(i)||this.data[i]!==this.data[i+1]||!this.right_bounded_cell(i+1)&&this.data[i+2]===this.data[i]||!this.left_bounded_cell(i)&&this.data[i-1]===this.data[i]||(this.left_bounded_cell(i)||2!==this.data[i-1]||(this.data[i-1]=(this.data[i]+1)%2),this.right_bounded_cell(i+1)||2!==this.data[i+2]||(this.data[i+2]=(this.data[i]+1)%2)),this.bottom_bounded_cell(i)||this.data[i]!==this.data[i+e]||!this.bottom_bounded_cell(i+e)&&this.data[i+n]===this.data[i]||!this.top_bounded_cell(i)&&this.data[i-e]===this.data[i]||(this.top_bounded_cell(i)||2!==this.data[i-e]||(this.data[i-e]=(this.data[i]+1)%2),this.bottom_bounded_cell(i+e)||2!==this.data[i+n]||(this.data[i+n]=(this.data[i]+1)%2)),this.right_bounded_cell(i)||this.right_bounded_cell(i+1)||this.data[i]!==this.data[i+2]||2!==this.data[i+1]||(this.data[i+1]=(this.data[i]+1)%2),this.bottom_bounded_cell(i)||this.bottom_bounded_cell(i+e)||this.data[i]!==this.data[i+n]||2!==this.data[i+e]||(this.data[i+e]=(this.data[i]+1)%2));for(var o=[],s=[],a=0;a<t;a++){for(var u=[0,0],c=0,d=new Array(t),l=0;l<t;l++){var f=this.at(l,a);2!==f?u[f]=u[f]+1:c++,d[l]=f}0===c&&o.push({idx:a,row:d}),2===c&&s.push({idx:a,row:d});var h=void 0;if(u[0]===t/2)h=1;else{if(u[1]!==t/2)continue;h=0}for(var l=0;l<t;l++)2===this.at(l,a)&&this.set(l,a,h)}for(var p=[],v=[],l=0;l<t;l++){for(var u=[0,0],c=0,y=new Array(t),a=0;a<t;a++){var f=this.at(l,a);y[a]=f,2!==f?u[f]=u[f]+1:c++}0===c&&p.push({idx:l,col:y}),2===c&&v.push({idx:l,col:y});var h=void 0;if(u[0]===t/2)h=1;else{if(u[1]!==t/2)continue;h=0}for(var a=0;a<t;a++)2===this.at(l,a)&&this.set(l,a,h)}console.log("missing2Rows",s);for(var g=0,m=s;g<m.length;g++)for(var b=m[g],_=0,x=o;_<x.length;_++){var w=x[_],z=r.array_diff(b.row,w.row);console.log("row_diff",z),2===z.length&&(this.set(z[0],b.idx,w.row[z[1]]),this.set(z[1],b.idx,w.row[z[0]]))}console.log("missing2Cols",v);for(var k=0,R=v;k<R.length;k++)for(var A=R[k],E=0,I=p;E<I.length;E++){var M=I[E],N=r.array_diff(A.col,M.col);console.log("col_diff",N),2===N.length&&(this.set(A.idx,N[0],M.col[N[1]]),this.set(A.idx,N[1],M.col[N[0]]))}},t.prototype.solve=function(){for(var t=0;t++<200&&!this.completed();)this.solve_pass()},t.prototype.randomUnder=function(t){return Math.floor(Math.random()*t)},t.prototype.clear=function(){for(var t in this.data)this.data[t]=2},t.prototype.generate=function(){this.clear();for(var t=[],e=!1;!e;){for(var n=!1,r=void 0;!n;)r=this.randomUnder(this.size*this.size),2===this.data[r]&&(n=!0);var i=this.randomUnder(2);this.data[r]=i,t.push([r,i]),this.solve();var o=this.verify(),s=this.completed();o?e=!0:s?t.pop():t.length>25&&(t=[],this.clear())}this.clear();for(var a=0,u=t;a<u.length;a++){var c=u[a];this.data[c[0]]=c[1]}return this},t.prototype.render=function(){for(var t=new Array(this.size),e=0,r=0;r<this.size;r++){for(var i=[],o=0;o<this.size;o++){var s=this.at(o,r),a=n.el("td",{class:"grid-cell-td",id:"grid-cell-td-"+e.toString()},[n.el("span",{class:"grid-cell grid-cell-"+s.toString(),id:"grid-cell-"+o.toString()+":"+r.toString()},[""])]);i.push(a),e++}t[r]=n.el("tr",{class:"grid-row",id:"grid-row-"+r.toString()},i)}var u=n.el("table",{class:"grid-table"},t);return n.el("div",{},[u,n.el("div",{id:"grid-status"},[this.verify()?"Correct":"Incorrect"]),n.el("button",{id:"solve-btn"},["Solve"]),n.el("button",{id:"generate-btn"},["Generate"])])},t}();e.Grid=i}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n,e],i=function(t,e){"use strict";function n(t){for(var e=0,n=1,r=0;r<t.length;r++){var i=t[r];e<<=1,i&&(e|=n)}return e}function r(t){return t.reduce(function(t,e){return t+e},0)}function i(){return Math.floor(2*Math.random())}function o(t,e){if(t.length!==e.length)return[];for(var n=[],r=0;r<t.length;r++)t[r]!==e[r]&&n.push(r);return n}e.bits2int=n,e.sum_bits=r,e.random_bit=i,e.array_diff=o}.apply(e,r),!(void 0!==i&&(t.exports=i))}])}]);